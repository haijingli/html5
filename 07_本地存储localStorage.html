<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>web存储 localStorage</title>
</head>
<body>
	<div id="content">
		
	</div>
	<script type="text/javascript">
		//localStorage为本地存储方式，存储内容长期有效，没有时间限制

		//sessionStorage针对一个 session 的数据存储,当用户关闭浏览器窗口后，数据会被删除。用法与localStorage相同，只是数据的有效期不同

		//写法1、使用key = value的方式
		if(localStorage.pageCount){
			window.localStorage.pageCount = Number(window.localStorage.pageCount) + 1;
		}else{
			//使用 key="pageCount" 和 value=1创建一个 localStorage 键/值对。
			window.localStorage.pageCount = 1;
		}
		//检索键值为"pageCount" 的值
		document.querySelector('#content').innerText = '网页访问量：' + localStorage.pageCount;

		//写法2、通过键值对的方式进行存储数据
		/*
			*保存数据：localStorage.setItem(key,value);
			*读取数据：localStorage.getItem(key);
			*删除单个数据：localStorage.removeItem(key);
			*删除所有数据：localStorage.clear();
			*得到某个索引的key：localStorage.key(index);
		*/
		window.localStorage.setItem("name","zhangsan");
		window.localStorage.setItem("age","29");
		window.localStorage.setItem("sex","male");

		//通过键获取相应的值
		var name = window.localStorage.getItem("name");
		document.write(name);

		//移除键,相应的值也会被移除
		window.localStorage.removeItem("name");

		//清空所有本地存储数据
		//window.localStorage.clear();

		//提示：键/值对通常以字符串存储，你可以按自己的需要转换该格式。

		var usersStr = '[{"no":"1","name":"zhangsan","age":"18","sex":"male"},'+
					'{"no":"2","name":"limei","age":"20","sex":"female"}'+
				   ']';
		var userStr = '{"no":"3","name":"lisi","age":"21","sex":"male"}';
				  
		window.localStorage.setItem("users",usersStr);
		window.localStorage.setItem("user",userStr);

		var user  = JSON.parse(window.localStorage.getItem("user"));
		console.log(user.name);

		//var str = JSON.stringify(user); // 将对象转换为字符串

		window.localStorage.clear();
	</script>
</body>
</html>